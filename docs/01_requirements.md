# 01. Requirements

## 1. 사용자 시나리오
1. **시세 모니터링**: 사용자가 웹 앱에 접속하면 기본 종목 리스트와 실시간 가격/등락 정보를 확인.
2. **종목 상세 분석**: 관심 종목을 선택하면 차트, 지표, 호가창, 체결 정보가 표시.
3. **주문 시뮬레이션**: 모의 주문 패널에서 수량/가격을 입력해 주문을 제출하고, 체결 여부와 잔고 변화를 확인.
4. **전략/AI 활용(후속)**: 강화학습 기반 전략을 선택해 시그널을 확인하고, 전략 성능 기록을 조회.
5. **데이터 요청**: 과거 시세 데이터를 조회하거나 백테스트를 요청하면 배치 작업이 실행되어 결과가 표시.

## 2. 핵심 기능 요구사항
### 2.1 HTS 코어
- 종목 목록/검색, 즐겨찾기 관리.
- 실시간 시세 스트리밍(호가, 체결, 현재가).
- 차트(분/일/주기 변환, 지표 overlay), lightweight-charts 활용.
- 호가창/체결창 UI, 주문 패널(시장가/지정가).
- 잔고/포지션/주문내역 패널.

### 2.2 데이터 처리
- 실시간 데이터: Korea Investment Open Trading API를 통한 WebSocket/REST 호출 래핑.
- 히스토리컬 데이터: FinanceDataReader 기반 수집, RDS 저장, API 제공.
- 데이터 리프레시 스케줄: 일일 종가 업데이트, 실시간 캐시/로그 저장.

### 2.3 백엔드 API
- FastAPI 기반 REST + WebSocket 엔드포인트.
- 계정(가짜) 로그인/세션(후속 단계에서 인증 추가).
- 주문 시뮬레이션: 주문 요청 → 가상 체결 엔진 → 상태 업데이트.
- 데이터 조회: 종목 리스트, 차트 데이터, 뉴스/공지(옵션).

### 2.4 프론트엔드 SPA
- React + Vite + TypeScript.
- 상태관리: React Query(서버 상태), Zustand(클라이언트 상태) 활용.
- 페이지/레이아웃: 메인 대시보드, 종목 상세, 전략 관리, 설정.
- 반응형 디자인(데스크탑 중심, 태블릿 적응 정도까지 고려).

### 2.5 AI/알고리즘(후속 단계)
- FinRL 기반 학습 파이프라인(데이터 전처리, 환경 구성, 모델 학습/평가).
- 전략 실행 API: 학습된 모델의 시그널 조회/실행.
- 학습/백테스트 작업 큐(Celery)와 결과 저장.

## 3. 비기능 요구사항
- **성능**: 실시간 데이터 지연 최소화 (<1s), 주요 API 응답 <300ms 목표.
- **확장성**: 이벤트 기반 아키텍처(WebSocket, Celery)로 확장 가능 구조.
- **안정성**: RDS 백업/복구, 서비스 장애 시 graceful fallback.
- **보안**: HTTPS, API 키/비밀 관리, 추후 사용자 인증/권한 도입.
- **로그/모니터링**: structured logging, 메트릭 수집, 에러 알림 도구 활용.

## 4. 사용자 흐름(초안)
1. **대시보드 진입**
   - 기본 종목/지수 카드, 시장 개요 표시.
   - 상단 검색/즐겨찾기.
2. **종목 선택**
   - 중앙: 차트/지표 패널.
   - 우측: 호가창/체결창.
   - 하단: 주문 패널, 잔고/포지션.
3. **주문 작업**
   - 주문 입력 → 제출 → 체결 결과/잔고 업데이트 실시간 반영.
4. **데이터/전략 페이지**
   - 히스토리컬 데이터 다운로드/요청.
   - 전략 관리: 학습 요청, 백테스트 로그, 시그널 확인.
5. **설정/환경**
   - API 키 등록, 알림 설정, 테마/레이아웃 커스터마이즈.

## 5. 점진적 로드맵
1. MVP: HTS UI + 기본 실시간 시세(모의) + 주문 시뮬레이션.
2. 실환경 연동: Open Trading API, FinanceDataReader, Redis 캐시.
3. 데이터 파이프라인: 히스토리컬 수집, RDS 저장, 차트 API.
4. 알고리즘/AI: FinRL 학습 파이프라인, 전략 시그널 UI.
5. 운영 고도화: 인증/권한, 모니터링/알림, DevOps/자동화.
